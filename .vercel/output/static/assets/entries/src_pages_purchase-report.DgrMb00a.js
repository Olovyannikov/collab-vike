import{n as M,p as B,t as N,j as t,B as v,v as C,w as h,y as F,z as g,x as n,A as I,q as P,g as V,k as L,h as c,P as $,S as H,G as O,f as q,i as Q,o as G,a as W,b as J,c as K,d as X,R as Y}from"../chunks/chunk-ghiSciBk.js";import{m as Z}from"../chunks/chunk-BS6Nmwvu.js";import{H as ee}from"../chunks/chunk-dfkXJ34Z.js";import{c as u,p as j,d as w}from"../chunks/chunk-CELtIG52.js";import{B as re,M as te}from"../chunks/chunk-BJM_8Jhx.js";import"../chunks/chunk-ASQl6zNv.js";import{u as oe,F as ae,a as se}from"../chunks/chunk-s3S_eQqa.js";import{s as x}from"../chunks/chunk-puvJOsNw.js";import{g as ie}from"../chunks/chunk-CbJBXCUw.js";import{T as ne}from"../chunks/chunk-__n6d-Ob.js";import{T as i,a as le}from"../chunks/chunk-BfTxiJep.js";import{F as de}from"../chunks/chunk-CxZBtTW6.js";import{T as pe}from"../chunks/chunk-Bfedm1qN.js";import{s as p}from"../chunks/chunk-BMrSlKbf.js";import{I as ce}from"../chunks/chunk-503L6oX_.js";/* empty css                      */import"../chunks/chunk-B7IjmMtm.js";/* empty css                      */import"../chunks/chunk-DDXIYpn5.js";import"../chunks/chunk-CAdDg9o0.js";import"../chunks/chunk-DM-kx-Ge.js";import"../chunks/chunk-FDnwkDT-.js";import"../chunks/chunk-BzvDQ7H5.js";import"../chunks/chunk-Dw2RImt7.js";import"../chunks/chunk-Dk4_YwO7.js";import"../chunks/chunk-DZBXMaph.js";import"../chunks/chunk-BbMBgJ5h.js";import"../chunks/chunk-DQ9UAh4q.js";import"../chunks/chunk-iZ2L0nw_.js";import"../chunks/chunk-CcAsZAUm.js";var b={root:"m_18320242","skeleton-fade":"m_299c329c"};const ue={visible:!0,animate:!0},me=C((e,{width:r,height:a,radius:o,circle:s})=>({root:{"--skeleton-height":h(a),"--skeleton-width":s?h(a):h(r),"--skeleton-radius":s?"1000px":o===void 0?void 0:F(o)}})),y=M((e,r)=>{const a=B("Skeleton",ue,e),{classNames:o,className:s,style:m,styles:f,unstyled:l,vars:d,width:we,height:be,circle:ze,visible:U,radius:ke,animate:E,mod:R,...A}=a,D=N({name:"Skeleton",classes:b,props:a,className:s,style:m,classNames:o,styles:f,unstyled:l,vars:d,varsResolver:me});return t.jsx(v,{ref:r,...D("root"),mod:[{visible:U,animate:E},R],...A})});y.classes=b;y.displayName="@mantine/core/Skeleton";function fe(e){var r,a;I.unit(e)?r=e:{source:r,reset:a}=e;var o=g(!0,{name:"$canTrigger",sid:"ys2jl0"}),s=n({and:[{source:r,filter:o}],or:{name:"trigger",sid:"e3xto3"}});return o.on(s,()=>!1),a&&o.reset(a),s}function he(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function ge(e){return he(e)&&"data"in e&&"message"in e}const S=P({name:"applyPromocodeClicked",sid:"-94troy"}),z=g("",{name:"$promocodeErrorMessage",sid:"-2c3qs7"}).on(S,()=>""),T=g(!1,{name:"$showSuccessPromoMessage",sid:"-2yl3jp"}),k=P({},{name:"reportPurchased",sid:"wwj1gz"}),ye=V(async e=>{window.open(e,"_self")},{name:"openTransactionPaywallFx",sid:"-cews0i"});n({and:[{clock:S,target:u.start}],or:{sid:"5jgo28"}});n({and:[{clock:u.finished.failure,fn:({error:e})=>ge(e)?e.data.message:"",target:z}],or:{sid:"5xrbhm"}});n({and:[{clock:u.finished.failure,fn:()=>!1,target:T}],or:{sid:"6clrid"}});n({and:[{clock:u.finished.success,fn:()=>!0,target:T}],or:{sid:"6fwj2j"}});n({and:[{clock:k,target:j.start}],or:{sid:"6uqz3a"}});n({and:[{source:L({sid:"-dwuloe",fn:()=>fe(j.finished.success),name:"source",method:"once"}),fn:({result:e})=>e.confirmation_url,target:ye}],or:{sid:"6xhy23"}});const Se=()=>{const{data:e}=c(ie),r=c(ne.$surveyId),a=c(k),o=oe({mode:"controlled",initialValues:{email:"",mbti_type:r?"":(e==null?void 0:e.mbti_type)??"",promo_code:"",survey_result:r??""},validate:{email:l=>/^\S+@\S+$/.test(l)?null:"Неправильный email"}}),s={radius:"xs",name:"email",withAsterisk:!0,key:o.key("email"),label:"Электронная почта",placeholder:"name@mail.ru",...o.getInputProps("email")},m={radius:"xs",name:"promo_code",key:o.key("promo_code"),placeholder:"Введите промокод",...o.getInputProps("promo_code")},f=o.onSubmit(l=>{const d={...l};r&&delete d.mbti_type,r||delete d.survey_result,d.promo_code||delete d.promo_code,a(d)});return{form:o,onSubmit:f,emailProps:s,promocodeProps:m}},Te=()=>{const{pending:e}=c(u),{applyPromoHandler:r,promocodeError:a,showSuccessMessage:o}=c({applyPromoHandler:S,promocodeError:z,showSuccessMessage:T}),{onSubmit:s,promocodeProps:m,emailProps:f,form:l}=Se();return t.jsxs(ae,{onSubmit:s,children:[t.jsx(se,{...f}),t.jsxs($,{bg:"gray.0",radius:"xs",p:"md",px:"sm",children:[t.jsx(i,{className:x.promocodeLabel,children:"У меня есть промокод"}),t.jsxs(de,{className:x.promocodeWrapper,children:[t.jsx(pe,{...m,disabled:e,error:a,"data-success":o,description:o?"Промокод применен":"",inputWrapperOrder:["label","input","description","error"]}),t.jsx(re,{fullWidth:!0,c:"dark.7",radius:"xs",color:"dark.7",variant:"outline",disabled:e,loading:e,onClick:()=>r(l.values.promo_code.toUpperCase()),children:"Применить"})]})]}),t.jsx(te,{disabled:e,radius:"xs",size:"md",type:"submit",children:"Перейти к оплате"}),t.jsxs(i,{fz:12,ta:"center",mb:12,children:["Нажимая на кнопку, вы подтверждаете свое согласие на сбор, хранение и использование ваших персональных данных согласно"," ",t.jsx(i,{fz:12,c:"blue.7",component:"a",href:"/privacy-policy",children:"Политике конфиденциальности"})," ","и принимаете условия"," ",t.jsx(i,{fz:12,c:"blue.7",component:"a",href:"/publisher-offer",children:"Публичной оферты"})]})]})},xe=()=>{const{data:e}=c(w),{data:r}=c(u);return t.jsxs(H,{className:p.wrapper,children:[t.jsx(le,{className:p.title,order:2,children:"Полный отчет по вашему типу личности"}),t.jsx(y,{className:p.skeleton,hidden:!!(e!=null&&e.regular_price),radius:"sm"}),t.jsxs(O,{gap:"lg",children:[t.jsxs(i,{hidden:!e,className:p.price,td:r!=null&&r.discount?"line-through":"",c:r!=null&&r.discount?"dark.0":"dark.7",children:[e==null?void 0:e.regular_price," ",t.jsx(i,{className:p.price,span:!0,ff:"system-ui",children:"₽"})]}),t.jsxs(i,{hidden:!(r!=null&&r.discount),className:p.price,c:"violet.8",children:[r==null?void 0:r.final_price," ",t.jsx(i,{className:p.price,span:!0,ff:"system-ui",children:"₽"})]})]})]})};function ve(){return t.jsx(ce,{image:Z,children:t.jsxs(v,{children:[t.jsx(xe,{}),t.jsx(Te,{}),t.jsx(ee,{})]})})}const Pe=Object.freeze(Object.defineProperty({__proto__:null,default:ve},Symbol.toStringTag,{value:"Module"})),_=q();n({and:[{clock:_,target:w.refresh}],or:{sid:"-m6izlg"}});const je=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:_},Symbol.toStringTag,{value:"Module"})),ar={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:Q}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:G}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:W}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Cognitive Lab"}},lang:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","lang"]},valueSerialized:{type:"js-serialized",value:"ru"}},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+onBeforeRenderClient.ts",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:J}]},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:K}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:X}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/widgets/RootLayout/index.tsx",fileExportPathToShowToUser:["RootLayout"]}],valueSerialized:[{type:"pointer-import",value:Y}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Pe}},pageStarted:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+pageStarted.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:je}}};export{ar as configValuesSerialized};
