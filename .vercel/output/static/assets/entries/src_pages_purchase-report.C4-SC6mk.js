import{t as C,v as B,J as F,j as r,h as j,L as I,D as y,N as V,aa as S,x as l,ab as L,a8 as w,_ as $,k as H,g as c,V as O,u as Q,ac as q,Z as W,f as n,F as G,B as J,M as Y,S as Z,T as K,Y as X,n as ee,i as te,o as re,a as ae,b as oe,c as se,d as ie,R as ne}from"../chunks/chunk-CChYhnZI.js";import{H as le}from"../chunks/chunk-Bl2B_WPF.js";import{c as u,p as b,d as _}from"../chunks/chunk-6Ddzw7yj.js";import"../chunks/chunk-DjClQUvI.js";import{u as pe,F as de,a as ce}from"../chunks/chunk-Da5GgPfU.js";import{s as P}from"../chunks/chunk-BGwg-q-s.js";import{T as ue}from"../chunks/chunk-BfETze8u.js";import{s as d}from"../chunks/chunk-CYR1Vv2U.js";import{I as me}from"../chunks/chunk-BjKEVwXY.js";/* empty css                      *//* empty css                      */import"../chunks/chunk-Cn-X2PZL.js";import"../chunks/chunk-4n9lNPDt.js";import"../chunks/chunk-BxBp0SIE.js";import"../chunks/chunk-noSfd3AH.js";import"../chunks/chunk-BeLGK-yd.js";import"../chunks/chunk-DAgojfjM.js";import"../chunks/chunk-CoHZ3gSO.js";import"../chunks/chunk-sTMZBbxg.js";import"../chunks/chunk-BXgSnkvC.js";import"../chunks/chunk-BfFJLfWq.js";import"../chunks/chunk-B-30aRae.js";import"../chunks/chunk-Bjl58J2j.js";import"../chunks/chunk-YDgnqoDI.js";import"../chunks/chunk-Cxg4_e5S.js";import"../chunks/chunk-I8GCz8E3.js";import"../chunks/chunk-C04oBjrl.js";import"../chunks/chunk-CTEXfQiH.js";var k={root:"m_18320242","skeleton-fade":"m_299c329c"};const fe={visible:!0,animate:!0},he=I((e,{width:t,height:a,radius:o,circle:s})=>({root:{"--skeleton-height":y(a),"--skeleton-width":s?y(a):y(t),"--skeleton-radius":s?"1000px":o===void 0?void 0:V(o)}})),x=C((e,t)=>{const a=B("Skeleton",fe,e),{classNames:o,className:s,style:i,styles:m,unstyled:f,vars:g,width:h,height:p,circle:ke,visible:R,radius:ze,animate:A,mod:D,...M}=a,N=F({name:"Skeleton",classes:k,props:a,className:s,style:i,classNames:o,styles:m,unstyled:f,vars:g,varsResolver:he});return r.jsx(j,{ref:t,...N("root"),mod:[{visible:R,animate:A},D],...M})});x.classes=k;x.displayName="@mantine/core/Skeleton";function ge(e){var t,a;L.unit(e)?t=e:{source:t,reset:a}=e;var o=S(!0,{name:"$canTrigger",sid:"ys2jl0"}),s=l({and:[{source:t,filter:o}],or:{name:"trigger",sid:"e3xto3"}});return o.on(s,()=>!1),a&&o.reset(a),s}function ye(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Se(e){return ye(e)&&"data"in e&&"message"in e}const xe=e=>{e.target.value=String(e.target.value).toUpperCase()},T=w({name:"applyPromocodeClicked",sid:"-94troy"}),z=S("",{name:"$promocodeErrorMessage",sid:"-2c3qs7"}).on(T,()=>""),v=S(!1,{name:"$showSuccessPromoMessage",sid:"-2yl3jp"}),U=w({},{name:"reportPurchased",sid:"wwj1gz"}),Te=$(async e=>{window.open(e,"_self")},{name:"openTransactionPaywallFx",sid:"-cews0i"});l({and:[{clock:T,target:u.start}],or:{sid:"5jgo28"}});l({and:[{clock:u.finished.failure,fn:({error:e})=>Se(e)?e.data.message:"",target:z}],or:{sid:"5xrbhm"}});l({and:[{clock:u.finished.failure,fn:()=>!1,target:v}],or:{sid:"6clrid"}});l({and:[{clock:u.finished.success,fn:()=>!0,target:v}],or:{sid:"6fwj2j"}});l({and:[{clock:U,target:b.start}],or:{sid:"6uqz3a"}});l({and:[{source:H({sid:"-dwuloe",fn:()=>ge(b.finished.success),name:"source",method:"once"}),fn:({result:e})=>e.confirmation_url,target:Te}],or:{sid:"6xhy23"}});const ve=()=>{const{data:e}=c(O),{urlParsed:t}=Q(),a=c(q.$surveyId),o=c(U),s=t.search.mbti,i=pe({mode:"controlled",initialValues:{email:"",mbti_type:a?"":(e==null?void 0:e.mbti_type)??s,promo_code:"",survey_result:a??""},validate:{email:h=>/^\S+@\S+$/.test(h)?null:"Неправильный email"}}),m={radius:"xs",name:"email",withAsterisk:!0,key:i.key("email"),label:"Электронная почта",placeholder:"name@mail.ru",...i.getInputProps("email")},f={radius:"xs",name:"promo_code",key:i.key("promo_code"),placeholder:"Введите промокод",...i.getInputProps("promo_code")},g=i.onSubmit(h=>{const p={...h};a&&delete p.mbti_type,h.mbti_type||(p.mbti_type=s),a||delete p.survey_result,p.promo_code||delete p.promo_code,o(p)});return{form:i,onSubmit:g,emailProps:m,promocodeProps:f}},Pe=()=>{const{pending:e}=c(u),{applyPromoHandler:t,promocodeError:a,showSuccessMessage:o}=c({applyPromoHandler:T,promocodeError:z,showSuccessMessage:v}),{onSubmit:s,promocodeProps:i,emailProps:m,form:f}=ve();return r.jsxs(de,{onSubmit:s,children:[r.jsx(ce,{...m}),r.jsxs(W,{bg:"gray.0",radius:"xs",p:"md",px:"sm",children:[r.jsx(n,{className:P.promocodeLabel,children:"У меня есть промокод"}),r.jsxs(G,{className:P.promocodeWrapper,children:[r.jsx(ue,{...i,disabled:e,error:a,onInput:xe,"data-success":o,description:o?"Промокод применен":"",inputWrapperOrder:["label","input","description","error"]}),r.jsx(J,{fullWidth:!0,c:"dark.7",radius:"xs",color:"dark.7",variant:"outline",disabled:e,loading:e,onClick:()=>t(f.values.promo_code.toUpperCase()),children:"Применить"})]})]}),r.jsx(Y,{disabled:e,radius:"xs",size:"md",type:"submit",children:"Перейти к оплате"}),r.jsxs(n,{fz:12,ta:"center",mb:12,children:["Нажимая на кнопку, вы подтверждаете свое согласие на сбор, хранение и использование ваших персональных данных согласно"," ",r.jsx(n,{fz:12,c:"blue.7",component:"a",href:"/privacy-policy",children:"Политике конфиденциальности"})," ","и принимаете условия"," ",r.jsx(n,{fz:12,c:"blue.7",component:"a",href:"/publisher-offer",children:"Публичной оферты"})]})]})},je=()=>{const{data:e}=c(_),{data:t}=c(u);return r.jsxs(Z,{className:d.wrapper,children:[r.jsx(K,{className:d.title,order:2,children:"Полный отчет по вашему типу личности"}),r.jsx(x,{className:d.skeleton,hidden:!!(e!=null&&e.regular_price),radius:"sm"}),r.jsxs(X,{gap:"lg",children:[r.jsxs(n,{hidden:!e,className:d.price,td:t!=null&&t.discount?"line-through":"",c:t!=null&&t.discount?"dark.0":"dark.7",children:[e==null?void 0:e.regular_price," ",r.jsx(n,{className:d.price,span:!0,ff:"system-ui",children:"₽"})]}),r.jsxs(n,{hidden:!(t!=null&&t.discount),className:d.price,c:"violet.8",children:[t==null?void 0:t.final_price," ",r.jsx(n,{className:d.price,span:!0,ff:"system-ui",children:"₽"})]})]})]})};function we(){return r.jsx(me,{image:"/images/men-temp_large.webp",children:r.jsxs(j,{children:[r.jsx(je,{}),r.jsx(Pe,{}),r.jsx(le,{})]})})}const be=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),E=ee();l({and:[{clock:E,target:_.refresh}],or:{sid:"-m6izlg"}});const _e=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:E},Symbol.toStringTag,{value:"Module"})),at={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:te}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:re}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:ae}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Cognitive Lab"}},lang:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","lang"]},valueSerialized:{type:"js-serialized",value:"ru"}},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+onBeforeRenderClient.ts",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:oe}]},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:se}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ie}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/widgets/RootLayout/index.tsx",fileExportPathToShowToUser:["RootLayout"]}],valueSerialized:[{type:"pointer-import",value:ne}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:be}},pageStarted:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+pageStarted.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:_e}}};export{at as configValuesSerialized};
