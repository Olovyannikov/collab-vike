import{n as B,p as C,y as F,j as t,B as j,A as I,v as y,D as V,M as S,x as l,N as L,K as w,H as $,k as H,f as c,u as O,P as Q,S as q,G,g as W,i as K,o as J,a as X,b as Y,c as Z,d as ee,R as re}from"../chunks/chunk-krdQHAUy.js";import{H as te}from"../chunks/chunk-C4H_ZP5u.js";import{c as u,p as b,d as _}from"../chunks/chunk-CcvrfCgo.js";import{B as oe,M as ae}from"../chunks/chunk-BW9xlyfv.js";import"../chunks/chunk-ASQl6zNv.js";import{u as se,F as ie,a as ne}from"../chunks/chunk-DQ3_FCNg.js";import{s as P}from"../chunks/chunk-BGwg-q-s.js";import{g as le}from"../chunks/chunk-Cx9D1i5q.js";import{T as pe}from"../chunks/chunk-BSKZ9cq6.js";import{a as n,T as de}from"../chunks/chunk-lN7CvV0g.js";import{F as ce}from"../chunks/chunk-1FqIsCBv.js";import{T as ue}from"../chunks/chunk-CBlo-a5j.js";import{s as d}from"../chunks/chunk-CYR1Vv2U.js";import{I as me}from"../chunks/chunk-CFMZGlw4.js";/* empty css                      */import"../chunks/chunk-B7IjmMtm.js";/* empty css                      */import"../chunks/chunk-DsIpRudE.js";import"../chunks/chunk-YhYFzeYz.js";import"../chunks/chunk-DcwgW6-3.js";import"../chunks/chunk-CFcYA5ax.js";import"../chunks/chunk-Bjl58J2j.js";import"../chunks/chunk-CyN2cKcU.js";import"../chunks/chunk-DBFKZH03.js";import"../chunks/chunk-JVwQl7Ld.js";import"../chunks/chunk-DdAVYb2-.js";import"../chunks/chunk-CiSouxZK.js";import"../chunks/chunk-Cxg4_e5S.js";import"../chunks/chunk-DCBApU4Z.js";import"../chunks/chunk-C04oBjrl.js";import"../chunks/chunk-CTEXfQiH.js";var k={root:"m_18320242","skeleton-fade":"m_299c329c"};const fe={visible:!0,animate:!0},he=I((e,{width:r,height:o,radius:a,circle:s})=>({root:{"--skeleton-height":y(o),"--skeleton-width":s?y(o):y(r),"--skeleton-radius":s?"1000px":a===void 0?void 0:V(a)}})),x=B((e,r)=>{const o=C("Skeleton",fe,e),{classNames:a,className:s,style:i,styles:m,unstyled:f,vars:g,width:h,height:p,circle:ke,visible:R,radius:ze,animate:A,mod:D,...M}=o,N=F({name:"Skeleton",classes:k,props:o,className:s,style:i,classNames:a,styles:m,unstyled:f,vars:g,varsResolver:he});return t.jsx(j,{ref:r,...N("root"),mod:[{visible:R,animate:A},D],...M})});x.classes=k;x.displayName="@mantine/core/Skeleton";function ge(e){var r,o;L.unit(e)?r=e:{source:r,reset:o}=e;var a=S(!0,{name:"$canTrigger",sid:"ys2jl0"}),s=l({and:[{source:r,filter:a}],or:{name:"trigger",sid:"e3xto3"}});return a.on(s,()=>!1),o&&a.reset(o),s}function ye(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function Se(e){return ye(e)&&"data"in e&&"message"in e}const xe=e=>{e.target.value=String(e.target.value).toUpperCase()},T=w({name:"applyPromocodeClicked",sid:"-94troy"}),z=S("",{name:"$promocodeErrorMessage",sid:"-2c3qs7"}).on(T,()=>""),v=S(!1,{name:"$showSuccessPromoMessage",sid:"-2yl3jp"}),U=w({},{name:"reportPurchased",sid:"wwj1gz"}),Te=$(async e=>{window.open(e,"_self")},{name:"openTransactionPaywallFx",sid:"-cews0i"});l({and:[{clock:T,target:u.start}],or:{sid:"5jgo28"}});l({and:[{clock:u.finished.failure,fn:({error:e})=>Se(e)?e.data.message:"",target:z}],or:{sid:"5xrbhm"}});l({and:[{clock:u.finished.failure,fn:()=>!1,target:v}],or:{sid:"6clrid"}});l({and:[{clock:u.finished.success,fn:()=>!0,target:v}],or:{sid:"6fwj2j"}});l({and:[{clock:U,target:b.start}],or:{sid:"6uqz3a"}});l({and:[{source:H({sid:"-dwuloe",fn:()=>ge(b.finished.success),name:"source",method:"once"}),fn:({result:e})=>e.confirmation_url,target:Te}],or:{sid:"6xhy23"}});const ve=()=>{const{data:e}=c(le),{urlParsed:r}=O(),o=c(pe.$surveyId),a=c(U),s=r.search.mbti,i=se({mode:"controlled",initialValues:{email:"",mbti_type:o?"":(e==null?void 0:e.mbti_type)??s,promo_code:"",survey_result:o??""},validate:{email:h=>/^\S+@\S+$/.test(h)?null:"Неправильный email"}}),m={radius:"xs",name:"email",withAsterisk:!0,key:i.key("email"),label:"Электронная почта",placeholder:"name@mail.ru",...i.getInputProps("email")},f={radius:"xs",name:"promo_code",key:i.key("promo_code"),placeholder:"Введите промокод",...i.getInputProps("promo_code")},g=i.onSubmit(h=>{const p={...h};o&&delete p.mbti_type,h.mbti_type||(p.mbti_type=s),o||delete p.survey_result,p.promo_code||delete p.promo_code,a(p)});return{form:i,onSubmit:g,emailProps:m,promocodeProps:f}},Pe=()=>{const{pending:e}=c(u),{applyPromoHandler:r,promocodeError:o,showSuccessMessage:a}=c({applyPromoHandler:T,promocodeError:z,showSuccessMessage:v}),{onSubmit:s,promocodeProps:i,emailProps:m,form:f}=ve();return t.jsxs(ie,{onSubmit:s,children:[t.jsx(ne,{...m}),t.jsxs(Q,{bg:"gray.0",radius:"xs",p:"md",px:"sm",children:[t.jsx(n,{className:P.promocodeLabel,children:"У меня есть промокод"}),t.jsxs(ce,{className:P.promocodeWrapper,children:[t.jsx(ue,{...i,disabled:e,error:o,onInput:xe,"data-success":a,description:a?"Промокод применен":"",inputWrapperOrder:["label","input","description","error"]}),t.jsx(oe,{fullWidth:!0,c:"dark.7",radius:"xs",color:"dark.7",variant:"outline",disabled:e,loading:e,onClick:()=>r(f.values.promo_code.toUpperCase()),children:"Применить"})]})]}),t.jsx(ae,{disabled:e,radius:"xs",size:"md",type:"submit",children:"Перейти к оплате"}),t.jsxs(n,{fz:12,ta:"center",mb:12,children:["Нажимая на кнопку, вы подтверждаете свое согласие на сбор, хранение и использование ваших персональных данных согласно"," ",t.jsx(n,{fz:12,c:"blue.7",component:"a",href:"/privacy-policy",children:"Политике конфиденциальности"})," ","и принимаете условия"," ",t.jsx(n,{fz:12,c:"blue.7",component:"a",href:"/publisher-offer",children:"Публичной оферты"})]})]})},je=()=>{const{data:e}=c(_),{data:r}=c(u);return t.jsxs(q,{className:d.wrapper,children:[t.jsx(de,{className:d.title,order:2,children:"Полный отчет по вашему типу личности"}),t.jsx(x,{className:d.skeleton,hidden:!!(e!=null&&e.regular_price),radius:"sm"}),t.jsxs(G,{gap:"lg",children:[t.jsxs(n,{hidden:!e,className:d.price,td:r!=null&&r.discount?"line-through":"",c:r!=null&&r.discount?"dark.0":"dark.7",children:[e==null?void 0:e.regular_price," ",t.jsx(n,{className:d.price,span:!0,ff:"system-ui",children:"₽"})]}),t.jsxs(n,{hidden:!(r!=null&&r.discount),className:d.price,c:"violet.8",children:[r==null?void 0:r.final_price," ",t.jsx(n,{className:d.price,span:!0,ff:"system-ui",children:"₽"})]})]})]})};function we(){return t.jsx(me,{image:"/images/men-temp_large.webp",children:t.jsxs(j,{children:[t.jsx(je,{}),t.jsx(Pe,{}),t.jsx(te,{})]})})}const be=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),E=W();l({and:[{clock:E,target:_.refresh}],or:{sid:"-m6izlg"}});const _e=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:E},Symbol.toStringTag,{value:"Module"})),ir={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:K}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:J}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:X}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Cognitive Lab"}},lang:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","lang"]},valueSerialized:{type:"js-serialized",value:"ru"}},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+onBeforeRenderClient.ts",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:Y}]},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Z}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ee}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/widgets/RootLayout/index.tsx",fileExportPathToShowToUser:["RootLayout"]}],valueSerialized:[{type:"pointer-import",value:re}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:be}},pageStarted:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+pageStarted.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:_e}}};export{ir as configValuesSerialized};
