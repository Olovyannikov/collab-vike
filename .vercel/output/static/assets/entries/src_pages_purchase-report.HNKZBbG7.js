import{m as N,n as F,y as $,j as t,B as w,C as L,s as y,D as V,W as h,X as n,S as H,a0 as g,Q as _,a4 as O,a7 as c,a2 as Q,_ as G,$ as W,ae as q,i as X,o as J,a as K,b as Y,c as Z,d as ee,R as re}from"../chunks/chunk-Bh0Djd6l.js";import{m as te}from"../chunks/chunk-BS6Nmwvu.js";import{H as ae}from"../chunks/chunk-C3t7dLOL.js";import{I as b,c as S,j as oe,H as se,F as ie}from"../chunks/chunk-DT8M1kGl.js";import{A as T,g as ne}from"../chunks/chunk-Dz17l8gd.js";import{B as le,M as de}from"../chunks/chunk-DBsLdM3t.js";import"../chunks/chunk-C78j02Lg.js";import{u as pe,F as ce,a as ue}from"../chunks/chunk-FapQJNU5.js";import{s as j}from"../chunks/chunk-puvJOsNw.js";import{T as me}from"../chunks/chunk-C85JtV4q.js";import{T as i,a as fe}from"../chunks/chunk-D3GhrS0l.js";import{T as he}from"../chunks/chunk-C30RECLF.js";import{s as p}from"../chunks/chunk-BMrSlKbf.js";import{I as ge}from"../chunks/chunk-CMlevOYl.js";/* empty css                      */import"../chunks/chunk-DXMN5A6d.js";/* empty css                      */import"../chunks/chunk-BS2FAdj6.js";import"../chunks/chunk-FDnwkDT-.js";import"../chunks/chunk-CcF_AdQP.js";import"../chunks/chunk-CtZVx3FN.js";import"../chunks/chunk-dy61VXaq.js";import"../chunks/chunk-BbMBgJ5h.js";import"../chunks/chunk-3swkiju7.js";import"../chunks/chunk-iZ2L0nw_.js";import"../chunks/chunk-CcAsZAUm.js";var z={root:"m_18320242","skeleton-fade":"m_299c329c"};const ye={visible:!0,animate:!0},Se=L((e,{width:r,height:o,radius:a,circle:s})=>({root:{"--skeleton-height":y(o),"--skeleton-width":s?y(o):y(r),"--skeleton-radius":s?"1000px":a===void 0?void 0:V(a)}})),x=N((e,r)=>{const o=F("Skeleton",ye,e),{classNames:a,className:s,style:m,styles:f,unstyled:l,vars:d,width:Re,height:Ee,circle:Ue,visible:D,radius:Ae,animate:M,mod:I,...C}=o,B=$({name:"Skeleton",classes:z,props:o,className:s,style:m,classNames:a,styles:f,unstyled:l,vars:d,varsResolver:Se});return t.jsx(w,{ref:r,...B("root"),mod:[{visible:D,animate:M},I],...C})});x.classes=z;x.displayName="@mantine/core/Skeleton";function Te(e){var r,o;H.unit(e)?r=e:{source:r,reset:o}=e;var a=h(!0,{name:"$canTrigger",sid:"ys2jl0"}),s=n({and:[{source:r,filter:a}],or:{name:"trigger",sid:"e3xto3"}});return a.on(s,()=>!1),o&&a.reset(o),s}const k=g({sid:"-1tbyj3",fn:()=>b({effect:S(()=>({url:T.GET_REGULAR_PRICE}))}),name:"getRegularPriceQuery",method:"createQuery"}),u=g({sid:"2o5wn9",fn:()=>b({effect:S(e=>({url:T.GET_PROMO_PRICE(e)}))}),name:"getPriceWithPromocodeQuery",method:"createQuery"}),R=g({sid:"i7j439",fn:()=>oe({effect:S(e=>({url:T.PURCHASE_REPORT,method:se.POST,body:e}))}),name:"purchaseReportMutation",method:"createMutation"});h(0,{name:"$regularPrice",sid:"-azggkp"});function xe(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}function Pe(e){return xe(e)&&"data"in e&&"message"in e}const P=_({name:"applyPromocodeClicked",sid:"-94troy"}),E=h("",{name:"$promocodeErrorMessage",sid:"-2c3qs7"}).on(P,()=>""),v=h(!1,{name:"$showSuccessPromoMessage",sid:"-2yl3jp"}),U=_({},{name:"reportPurchased",sid:"wwj1gz"}),ve=O(async e=>{window.open(e,"_self")},{name:"openTransactionPaywallFx",sid:"-cews0i"});n({and:[{clock:P,target:u.start}],or:{sid:"5jgo28"}});n({and:[{clock:u.finished.failure,fn:({error:e})=>Pe(e)?e.data.message:"",target:E}],or:{sid:"5xrbhm"}});n({and:[{clock:u.finished.failure,fn:()=>!1,target:v}],or:{sid:"6clrid"}});n({and:[{clock:u.finished.success,fn:()=>!0,target:v}],or:{sid:"6fwj2j"}});n({and:[{clock:U,target:R.start}],or:{sid:"6uqz3a"}});n({and:[{source:g({sid:"-dwuloe",fn:()=>Te(R.finished.success),name:"source",method:"once"}),fn:({result:e})=>e.confirmation_url,target:ve}],or:{sid:"6xhy23"}});const je=()=>{const{data:e}=c(ne),r=c(me.$surveyId),o=c(U),a=pe({mode:"controlled",initialValues:{email:"",mbti_type:r?"":(e==null?void 0:e.mbti_type)??"",promo_code:"",survey_result:r??""},validate:{email:l=>/^\S+@\S+$/.test(l)?null:"Неправильный email"}}),s={radius:"xs",name:"email",withAsterisk:!0,key:a.key("email"),label:"Электронная почта",placeholder:"name@mail.ru",...a.getInputProps("email")},m={radius:"xs",name:"promo_code",key:a.key("promo_code"),placeholder:"Введите промокод",...a.getInputProps("promo_code")},f=a.onSubmit(l=>{const d={...l};r&&delete d.mbti_type,r||delete d.survey_result,d.promo_code||delete d.promo_code,o(d)});return{form:a,onSubmit:f,emailProps:s,promocodeProps:m}},we=()=>{const{pending:e}=c(u),{applyPromoHandler:r,promocodeError:o,showSuccessMessage:a}=c({applyPromoHandler:P,promocodeError:E,showSuccessMessage:v}),{onSubmit:s,promocodeProps:m,emailProps:f,form:l}=je();return t.jsxs(ce,{onSubmit:s,children:[t.jsx(ue,{...f}),t.jsxs(Q,{bg:"gray.0",radius:"xs",p:"md",px:"sm",children:[t.jsx(i,{className:j.promocodeLabel,children:"У меня есть промокод"}),t.jsxs(ie,{className:j.promocodeWrapper,children:[t.jsx(he,{...m,disabled:e,error:o,"data-success":a,description:a?"Промокод применен":"",inputWrapperOrder:["label","input","description","error"]}),t.jsx(le,{fullWidth:!0,c:"dark.7",radius:"xs",color:"dark.7",variant:"outline",disabled:e,loading:e,onClick:()=>r(l.values.promo_code.toUpperCase()),children:"Применить"})]})]}),t.jsx(de,{disabled:e,radius:"xs",size:"md",type:"submit",children:"Перейти к оплате"}),t.jsxs(i,{fz:12,ta:"center",mb:12,children:["Нажимая на кнопку, вы подтверждаете свое согласие на сбор, хранение и использование ваших персональных данных согласно"," ",t.jsx(i,{fz:12,c:"blue.7",component:"a",href:"/privacy-policy",children:"Политике конфиденциальности"})," ","и принимаете условия"," ",t.jsx(i,{fz:12,c:"blue.7",component:"a",href:"/publisher-offer",children:"Публичной оферты"})]})]})},_e=()=>{const{data:e}=c(k),{data:r}=c(u);return t.jsxs(G,{className:p.wrapper,children:[t.jsx(fe,{className:p.title,order:2,children:"Полный отчет по вашему типу личности"}),t.jsx(x,{className:p.skeleton,hidden:!!(e!=null&&e.regular_price),radius:"sm"}),t.jsxs(W,{gap:"lg",children:[t.jsxs(i,{hidden:!e,className:p.price,td:r!=null&&r.discount?"line-through":"",c:r!=null&&r.discount?"dark.0":"dark.7",children:[e==null?void 0:e.regular_price," ",t.jsx(i,{className:p.price,span:!0,ff:"system-ui",children:"₽"})]}),t.jsxs(i,{hidden:!(r!=null&&r.discount),className:p.price,c:"violet.8",children:[r==null?void 0:r.final_price," ",t.jsx(i,{className:p.price,span:!0,ff:"system-ui",children:"₽"})]})]})]})};function be(){return t.jsx(ge,{image:te,children:t.jsxs(w,{children:[t.jsx(_e,{}),t.jsx(we,{}),t.jsx(ae,{})]})})}const ze=Object.freeze(Object.defineProperty({__proto__:null,default:be},Symbol.toStringTag,{value:"Module"})),A=q();n({and:[{clock:A,target:k.refresh}],or:{sid:"-m6izlg"}});const ke=Object.freeze(Object.defineProperty({__proto__:null,pageStarted:A},Symbol.toStringTag,{value:"Module"})),sr={isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:{server:!0}}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},Loading:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/Loading",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:X}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/__internal/integration/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:J}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"vike-react/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}},Wrapper:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+Wrapper.tsx",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:K}]},title:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","title"]},valueSerialized:{type:"js-serialized",value:"Cognitive Lab"}},lang:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","lang"]},valueSerialized:{type:"js-serialized",value:"ru"}},reactStrictMode:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+config.ts",fileExportPathToShowToUser:["default","reactStrictMode"]},valueSerialized:{type:"js-serialized",value:!1}},onBeforeRenderClient:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/pages/+onBeforeRenderClient.ts",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"plus-file",exportValues:Y}]},onPageTransitionEnd:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionEnd.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:Z}},onPageTransitionStart:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/+onPageTransitionStart.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ee}},Layout:{type:"cumulative",definedAtData:[{filePathToShowToUser:"/src/widgets/RootLayout/index.tsx",fileExportPathToShowToUser:["RootLayout"]}],valueSerialized:[{type:"pointer-import",value:re}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+Page.tsx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ze}},pageStarted:{type:"standard",definedAtData:{filePathToShowToUser:"/src/pages/purchase-report/+pageStarted.ts",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:ke}}};export{sr as configValuesSerialized};
